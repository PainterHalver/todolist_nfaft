(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{4722:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return t(6455)}])},6455:function(e,r,t){"use strict";t.r(r);var n=t(7568),s=t(1799),i=t(9396),o=t(655),a=t(5893),l=t(9823),u=t(2389),d=t(6390),c=t(612),g=t(1577),h=t(1664),m=t.n(h),p=t(7294),f=t(196),w=t(1163),x=t(5331),v=t(7783),y=t(9008),Z=t.n(y),b=t(4903),P=t(9446),j=l.Z.Title,k={formContainer:{backgroundColor:"white",padding:"2rem",boxShadow:"0 0 10px 5px rgba(0, 0, 0, 0.2)",height:"fit-content",maxWidth:"600px",width:"100%"},submitButton:{width:"100%",marginTop:"1rem"}},_={initial:{opacity:0,x:150,y:0},animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:150,y:0}},C=function(e){var r,t=e.setFromNoHeaderRoute,h=(0,p.useState)({}),y=h[0],C=h[1],S=(0,p.useState)(!1),T=S[0],E=S[1],I=(0,b.TL)(),N=(0,b.CG)(P.Mb),R=(0,w.useRouter)();(0,p.useEffect)(function(){t(!0),N&&R.push("/")},[N,t,R]);var F=(r=(0,n.Z)(function(e){var r,t,n,s,i;return(0,o.__generator)(this,function(o){switch(o.label){case 0:E(!0),o.label=1;case 1:return o.trys.push([1,4,5,6]),u.ZP.loading({content:"Registering account on server...",key:"register",duration:60}),[4,f.ZP.post("/auth/register",e)];case 2:return r=o.sent(),u.ZP.loading({content:"Signing in firebase...",key:"register",duration:60}),t=(0,v.v0)(),[4,(0,v._p)(t,r.data.firebaseToken)];case 3:return n=o.sent(),console.log({userCredentials:n}),I((0,P.x4)(r.data.user)),localStorage.setItem("token",r.data.token),localStorage.setItem("firebaseToken",r.data.firebaseToken),u.ZP.success({content:"Successfully registed!",key:"register"}),console.log(r),[3,6];case 4:return s=o.sent(),console.log(s),f.ZP.isAxiosError(s)&&C(null===(i=s.response)||void 0===i?void 0:i.data.errors),u.ZP.error({content:"Failed to register!",key:"register"}),[3,6];case 5:return E(!1),[7];case 6:return[2]}})}),function(e){return r.apply(this,arguments)});return(0,a.jsxs)(x.E.div,{variants:_,transition:{type:"linear"},style:k.formContainer,children:[(0,a.jsx)(Z(),{children:(0,a.jsx)("title",{children:"Register"})}),(0,a.jsxs)(d.Z,{name:"register",initialValues:{remember:!0},size:"large",onFinish:F,autoComplete:"off",layout:"vertical",children:[(0,a.jsx)(j,{style:{textAlign:"center"},children:"Register"}),(0,a.jsx)(d.Z.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],help:null==y?void 0:y.username,validateStatus:(null==y?void 0:y.username)?"error":"",children:(0,a.jsx)(c.Z,{onChange:function(){return C((0,i.Z)((0,s.Z)({},y),{username:void 0}))}})}),(0,a.jsx)(d.Z.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],help:null==y?void 0:y.password,validateStatus:(null==y?void 0:y.password)?"error":"",children:(0,a.jsx)(c.Z.Password,{onChange:function(){return C((0,i.Z)((0,s.Z)({},y),{password:void 0}))}})}),(0,a.jsx)(d.Z.Item,{label:"Confirm Password",name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"Please reenter your password!"},function(e){return{validator:function(r,t){return t&&e.getFieldValue("password")!==t?Promise.reject("Passwords do not match!"):Promise.resolve()}}},],help:null==y?void 0:y.password,validateStatus:(null==y?void 0:y.password)?"error":"",children:(0,a.jsx)(c.Z.Password,{onChange:function(){return C((0,i.Z)((0,s.Z)({},y),{password:void 0}))}})}),(0,a.jsx)(d.Z.Item,{children:(0,a.jsx)(g.Z,{type:"primary",htmlType:"submit",style:k.submitButton,loading:T,children:"Register"})}),(0,a.jsxs)(d.Z.Item,{style:{textAlign:"right"},children:["Or"," ",(0,a.jsx)(m(),{href:"/login",children:(0,a.jsx)(l.Z.Link,{children:"login now!"})})]})]})]})};r.default=C}},function(e){e.O(0,[78,774,888,179],function(){return e(e.s=4722)}),_N_E=e.O()}]);