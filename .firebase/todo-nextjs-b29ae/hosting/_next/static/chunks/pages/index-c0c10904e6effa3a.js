(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2070)}])},2070:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(7568),o=n(655),i=n(5893),a=n(5321),l=n(5331),c=n(1544),s=n(7294),d=n(1577),u=n(9008),p=n.n(u),f=n(1799),h=n(9396),x=n(357),y=n.n(x),g=n(5035),m=n(2714),v=n(773),j=n(9823),b=n(1019),C=n(4594),w=n(1163),k=n(8403),E=n(4903),Z=n(248),I={cardContainer:{borderRadius:"5px"},card:{backgroundColor:"#ffffff",overflow:"hidden",textOverflow:"ellipsis"}},_=function(e){var t,n,c=e.id,d=e.todo,u=d.title,p=d.note,x=d.completed,C=d.createdAt,_=d.updatedAt,A=(0,s.useState)(!1),S=A[0],R=A[1],z=(0,w.useRouter)(),N=(0,E.TL)(),P=(t=(0,r.Z)(function(){var e;return(0,o.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,a.r7)((0,a.JU)(k.Z,"todos",c),{completed:!x})];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),console.log("Error trying to complete todo: ",e),[3,3];case 3:return[2]}})}),function(){return t.apply(this,arguments)}),U=(n=(0,r.Z)(function(){var e;return(0,o.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,a.oe)((0,a.JU)(k.Z,"todos",c))];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),console.log("Error trying to remove todo: ",e),[3,3];case 3:return[2]}})}),function(){return n.apply(this,arguments)}),O=function(){N((0,Z.tF)({id:c,todo:{title:u,note:p,completed:x,createdAt:C.toDate().toISOString(),updatedAt:_.toDate().toISOString()}})),z.push("#".concat(c))};return(0,i.jsxs)("div",{className:"jsx-6d8008441f2ce11a",children:[(0,i.jsx)(y(),{id:"6d8008441f2ce11a",children:".deleteIconContainer.jsx-6d8008441f2ce11a{font-size:1.1rem;opacity:.6;aspect-ratio:1/1;padding:0 .2rem;-webkit-transition:all.1s ease;-moz-transition:all.1s ease;-o-transition:all.1s ease;transition:all.1s ease;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:1.9rem;border:none;background-color:transparent}.deleteIconContainer.jsx-6d8008441f2ce11a:hover{color:red;cursor:pointer;background-color:#0001;opacity:1}"}),(0,i.jsx)(l.E.div,{initial:"initial",animate:"animate",exit:"exit",variants:{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,transition:{delay:S?0:.3}},exit:{opacity:0,scale:0}},layoutId:"card-container-".concat(c),style:I.cardContainer,whileHover:{scale:1.05},onHoverStart:function(){return R(!0)},onHoverEnd:function(){return R(!1)},onClick:O,children:(0,i.jsxs)(v.Z,{title:(0,i.jsx)(T,{completed:x,title:u,id:c,toggleCompleted:P}),bordered:!1,style:(0,h.Z)((0,f.Z)({},I.card),{opacity:x?.6:1}),children:[(0,i.jsx)(l.E.div,{layoutId:"card-note-".concat(c),children:(0,i.jsx)(j.Z,{children:p.length>380?p.slice(0,380).split(" ").slice(0,-1).join(" ")+"...":p})}),(0,i.jsxs)("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},className:"jsx-6d8008441f2ce11a",children:[(0,i.jsx)(l.E.div,{layoutId:"card-updatedAt-".concat(c),children:(0,i.jsx)(j.Z,{style:{opacity:.6,textAlign:"right",display:"inline"},children:null==_?void 0:_.toDate().toISOString()})}),(0,i.jsx)(l.E.div,{children:(0,i.jsx)(b.Z,{title:"Are you sure to delete this todo?",onConfirm:function(e){null==e||e.stopPropagation(),setTimeout(U,200)},onCancel:function(e){return null==e?void 0:e.stopPropagation()},okText:"Yes",icon:(0,i.jsx)(g.Z,{style:{color:"red"}}),cancelText:"No",children:(0,i.jsx)("button",{onClick:function(e){return e.stopPropagation()},className:"jsx-6d8008441f2ce11a deleteIconContainer",children:(0,i.jsx)(m.Z,{className:""})})})})]})]})})]})},T=function(e){var t=e.completed,n=e.toggleCompleted,r=e.title,o=e.id,a=r.length>100?r.slice(0,100).split(" ").slice(0,-1).join(" ")+"...":r;return(0,i.jsxs)(l.E.div,{layoutId:"card-title-".concat(o),style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(l.E.div,{layoutId:"card-title-text-".concat(o),style:{marginRight:"auto"},children:(0,i.jsx)("div",{style:{whiteSpace:"break-spaces"},children:a})}),(0,i.jsx)(l.E.div,{layoutId:"card-switch-".concat(o),onClick:function(e){return e.stopPropagation()},children:(0,i.jsx)(C.Z,{checked:t,onChange:n,style:{backgroundColor:t?"#ff7979":"#bfbfbf"}})})]})},A=n(2389),S={modalContainer:{position:"fixed",top:0,left:0,bottom:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",padding:"1rem"},overlay:{zIndex:1,position:"fixed",background:"rgba(0, 0, 0, 0.2)",willChange:"opacity",top:0,bottom:0,left:0,right:0},cardContainer:{width:"100%",borderRadius:"5px",maxWidth:"700px",zIndex:2},card:{backgroundColor:"#ffffff",overflow:"hidden",textOverflow:"ellipsis"}},R=function(){var e,t,n,c=(0,w.useRouter)(),u=(0,E.CG)(Z.mV),p=u.title,x=u.note,y=u.completed,m=u.updatedAt,C=(0,E.CG)(Z.JC),I=(0,E.TL)(),_=(0,s.useRef)(null),T=(0,s.useRef)(null),R=(e=(0,r.Z)(function(){var e;return(0,o.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),I((0,Z.tF)({id:C,todo:{title:p,note:x,completed:!y,updatedAt:m}})),[4,(0,a.r7)((0,a.JU)(k.Z,"todos",C),{completed:!y})];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),console.log("Error trying to complete todo: ",e),[3,3];case 3:return[2]}})}),function(){return e.apply(this,arguments)}),N=(t=(0,r.Z)(function(){var e;return(0,o.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),U(),[4,(0,a.oe)((0,a.JU)(k.Z,"todos",C))];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),console.log("Error trying to remove todo: ",e),[3,3];case 3:return[2]}})}),function(){return t.apply(this,arguments)}),P=(n=(0,r.Z)(function(){var e,t,n,r,i;return(0,o.__generator)(this,function(o){switch(o.label){case 0:if(!_.current||!T.current)return[2];e=_.current.textContent||"",t=T.current.textContent||"",A.ZP.loading({content:"Updating...",key:"update",duration:60}),o.label=1;case 1:return o.trys.push([1,3,,4]),n=(0,a.Bt)(),r=(0,a.JU)(k.Z,"todos",C),[4,(0,a.r7)(r,{title:e,note:t,updatedAt:n})];case 2:return o.sent(),A.ZP.success({content:"Updated!",key:"update"}),I((0,Z.tF)({id:C,todo:{title:e,note:t,completed:y,updatedAt:new Date().toISOString()}})),[3,4];case 3:return i=o.sent(),console.log("Error trying to update todo: ",i),A.ZP.error({content:"Error trying to update todo",key:"update"}),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),U=function(){c.push("/")};return(0,i.jsxs)("div",{style:S.modalContainer,children:[(0,i.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.15}},style:S.overlay,onClick:U}),(0,i.jsx)(l.E.div,{drag:!0,dragConstraints:{left:0,right:0,top:0,bottom:0},layoutId:"card-container-".concat(C),style:S.cardContainer,children:(0,i.jsxs)(v.Z,{title:(0,i.jsx)(z,{completed:y,title:p,titleRef:_,id:C,toggleCompleted:R}),bordered:!1,style:(0,h.Z)((0,f.Z)({},S.card),{opacity:y?.6:1}),children:[(0,i.jsx)(l.E.div,{layoutId:"card-note-".concat(C),contentEditable:!0,ref:T,suppressContentEditableWarning:!0,children:x}),(0,i.jsxs)("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"start",alignItems:"center"},children:[(0,i.jsx)(l.E.div,{layoutId:"card-updatedAt-".concat(C),style:{marginRight:"auto"},children:(0,i.jsx)(j.Z,{style:{opacity:.6,display:"inline"},children:m&&m})}),(0,i.jsx)(l.E.div,{children:(0,i.jsx)(b.Z,{title:"Are you sure to delete this todo?",onConfirm:function(){return setTimeout(N,200)},okText:"Yes",icon:(0,i.jsx)(g.Z,{style:{color:"red"}}),cancelText:"No",children:(0,i.jsx)(d.Z,{type:"primary",danger:!0,children:"Delete"})})}),(0,i.jsx)(l.E.div,{style:{marginLeft:"1rem"},children:(0,i.jsx)(d.Z,{type:"primary",onClick:P,children:"Update"})})]})]})})]})},z=function(e){var t=e.completed,n=e.toggleCompleted,r=e.title,o=e.id,a=e.titleRef;return(0,s.useEffect)(function(){if(a.current){var e;a.current.focus(),document.execCommand("selectAll",!1,void 0),null===(e=document.getSelection())||void 0===e||e.collapseToEnd()}},[a]),(0,i.jsxs)(l.E.div,{layoutId:"card-title-".concat(o),style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(l.E.div,{layoutId:"card-title-text-".concat(o),style:{flex:1},children:(0,i.jsx)("div",{contentEditable:!0,suppressContentEditableWarning:!0,style:{whiteSpace:"break-spaces"},ref:a,children:r})}),(0,i.jsx)(l.E.div,{layoutId:"card-switch-".concat(o),onClick:function(e){return e.stopPropagation()},children:(0,i.jsx)(C.Z,{checked:t,onChange:n,style:{backgroundColor:t?"#ff7979":"#bfbfbf"}})})]})},N=n(7783),P=n(9446),U={container:{maxWidth:"1200px",width:"100%",alignSelf:"start",height:"100%",padding:"1rem 1rem",display:"flex",flexDirection:"column",alignItems:"center"},addTodoContainer:{backgroundColor:"white",color:"black",marginBottom:"1.5rem",width:"66%",minWidth:"450px",borderRadius:"3px",padding:".5rem .7rem",fontSize:"1rem",letterSpacing:"0.00938em",height:"-1px",display:"flex",flexDirection:"column"},wrapper:{width:"100%",height:"100%",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"2rem"}},O={initial:{opacity:0},animate:{opacity:1,transition:{delay:.3}},exit:{opacity:0}},D=function(){var e,t=(0,s.useState)(!1),n=t[0],u=t[1],f=(0,s.useRef)(null),h=(0,s.useRef)(null),x=(0,s.useState)([]),y=x[0],g=x[1],m=(0,E.CG)(P.dy),v=(0,E.TL)(),j=(0,w.useRouter)(),b=j.asPath.split("#")[1];b&&!y.some(function(e){return e.id===b})&&(j.push("/"),window.location.reload()),(0,s.useEffect)(function(){I(f.current),v((0,Z.Cn)());var e=(0,N.v0)().currentUser,t=(0,a.cf)((0,a.IO)((0,a.hJ)(k.Z,"todos"),(0,a.ar)("uid","==",e?e.uid:null),(0,a.Xo)("completed","asc"),(0,a.Xo)("updatedAt","desc")),function(e){g(e.docs)},function(e){return console.log(e)});return function(){return t()}},[m,v]);var C=(e=(0,r.Z)(function(e){var t,n,r,i,l,c;return(0,o.__generator)(this,function(o){switch(o.label){case 0:e.preventDefault(),r=null===(t=f.current)||void 0===t?void 0:t.value,i=null===(n=h.current)||void 0===n?void 0:n.value,T(),o.label=1;case 1:return o.trys.push([1,3,,4]),l=(0,N.v0)().currentUser,[4,(0,a.ET)((0,a.hJ)(k.Z,"todos"),{uid:l?l.uid:null,title:r,note:i,completed:!1,createdAt:(0,a.Bt)(),updatedAt:(0,a.Bt)()})];case 2:return o.sent(),[3,4];case 3:return c=o.sent(),console.log("Error trying to add todo: ",c),[3,4];case 4:return[2]}})}),function(t){return e.apply(this,arguments)}),I=function(e){e&&(e.style.height="1px",e.style.height=e.scrollHeight+"px")},T=function(){f.current.value="",I(f.current),u(!1)};return(0,i.jsxs)(l.E.div,{variants:O,transition:{type:"linear"},style:U.container,children:[(0,i.jsx)(p(),{children:(0,i.jsx)("title",{children:"Todolist"})}),(0,i.jsxs)(l.E.form,{animate:"animate",variants:{animate:{height:"auto"}},transition:{duration:.3},layout:!0,style:U.addTodoContainer,whileHover:{boxShadow:"0 0 10px 5px rgba(0, 0, 0, 0.2)",cursor:"text"},children:[(0,i.jsx)(l.E.textarea,{layout:!0,placeholder:n?"Title":"Add a todo...",onClick:function(){return u(!0)},onFocus:function(){return u(!0)},style:{fontSize:"1.1rem",border:"none",fontWeight:n?500:400,resize:"none",padding:".4rem 0"},onChange:function(e){return I(e.target)},ref:f}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("textarea",{name:"note",placeholder:"Add a note...",style:{border:"none",marginTop:"0.7rem",resize:"none",height:"1.85rem"},ref:h,onChange:function(e){return I(e.target)}}),(0,i.jsxs)("div",{style:{textAlign:"center",marginTop:"1.2rem"},children:[(0,i.jsx)(d.Z,{onClick:T,children:"Cancel"}),(0,i.jsx)(d.Z,{type:"primary",onClick:C,style:{marginLeft:"1rem"},children:"Add"})]})]})]},"add-todo"),(0,i.jsx)("div",{style:U.wrapper,children:(0,i.jsx)(c.M,{children:y.map(function(e){return(0,i.jsx)(_,{todo:e.data(),id:e.id},e.id)})})}),(0,i.jsx)(c.M,{children:b&&(0,i.jsx)(R,{})})]})}}},function(e){e.O(0,[902,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);